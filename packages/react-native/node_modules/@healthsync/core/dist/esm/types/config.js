/**
 * Configuration Types
 *
 * This module defines all configuration interfaces and types for the HealthSync SDK,
 * including SDK initialization config, sync options, and error types.
 *
 * @module types/config
 */
import { DataType } from '../models/unified-data';
/**
 * Log level enumeration
 *
 * @enum {string}
 */
export var LogLevel;
(function (LogLevel) {
    /** No logging */
    LogLevel["NONE"] = "none";
    /** Log errors only */
    LogLevel["ERROR"] = "error";
    /** Log warnings and errors */
    LogLevel["WARN"] = "warn";
    /** Log info, warnings, and errors */
    LogLevel["INFO"] = "info";
    /** Log everything including debug messages */
    LogLevel["DEBUG"] = "debug";
})(LogLevel || (LogLevel = {}));
/**
 * Cache storage layer
 *
 * @enum {string}
 */
export var CacheLayer;
(function (CacheLayer) {
    /** In-memory cache (fastest, session-only) */
    CacheLayer["MEMORY"] = "memory";
    /** Local database cache (SQLite, IndexedDB) */
    CacheLayer["LOCAL_DB"] = "local_db";
    /** Cloud storage cache (user's backend) */
    CacheLayer["CLOUD"] = "cloud";
    /** All cache layers */
    CacheLayer["ALL"] = "all";
})(CacheLayer || (CacheLayer = {}));
// ============================================================================
// Error Types
// ============================================================================
/**
 * Base error class for all SDK errors
 *
 * @class SDKError
 * @extends {Error}
 */
export class SDKError extends Error {
    constructor(message, code, statusCode, details, originalError) {
        super(message);
        /** Error code */
        Object.defineProperty(this, "code", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** HTTP status code (if applicable) */
        Object.defineProperty(this, "statusCode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Additional error details */
        Object.defineProperty(this, "details", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Original error (if wrapped) */
        Object.defineProperty(this, "originalError", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'SDKError';
        this.code = code;
        if (statusCode !== undefined) {
            this.statusCode = statusCode;
        }
        if (details !== undefined) {
            this.details = details;
        }
        if (originalError !== undefined) {
            this.originalError = originalError;
        }
        // Maintain proper stack trace
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }
}
/**
 * Configuration error
 *
 * @class ConfigurationError
 * @extends {SDKError}
 */
export class ConfigurationError extends SDKError {
    constructor(message, details) {
        super(message, 'CONFIGURATION_ERROR', undefined, details);
        this.name = 'ConfigurationError';
    }
}
/**
 * Authentication error
 *
 * @class AuthenticationError
 * @extends {SDKError}
 */
export class AuthenticationError extends SDKError {
    constructor(message, statusCode, details) {
        super(message, 'AUTHENTICATION_ERROR', statusCode, details);
        this.name = 'AuthenticationError';
    }
}
/**
 * Connection error
 *
 * @class ConnectionError
 * @extends {SDKError}
 */
export class ConnectionError extends SDKError {
    constructor(message, source, statusCode, details) {
        super(message, 'CONNECTION_ERROR', statusCode, details);
        /** Source that failed to connect */
        Object.defineProperty(this, "source", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'ConnectionError';
        this.source = source;
    }
}
/**
 * Data fetch error
 *
 * @class DataFetchError
 * @extends {SDKError}
 */
export class DataFetchError extends SDKError {
    constructor(message, source, dataType, statusCode, details) {
        super(message, 'DATA_FETCH_ERROR', statusCode, details);
        /** Source where fetch failed */
        Object.defineProperty(this, "source", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Data type that failed to fetch */
        Object.defineProperty(this, "dataType", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'DataFetchError';
        this.source = source;
        this.dataType = dataType;
    }
}
/**
 * Rate limit error
 *
 * @class RateLimitError
 * @extends {SDKError}
 */
export class RateLimitError extends SDKError {
    constructor(message, resetAt, retryAfter) {
        super(message, 'RATE_LIMIT_ERROR', 429, { resetAt, retryAfter });
        /** Timestamp when rate limit resets (ISO 8601) */
        Object.defineProperty(this, "resetAt", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Retry after duration in seconds */
        Object.defineProperty(this, "retryAfter", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'RateLimitError';
        this.resetAt = resetAt;
        this.retryAfter = retryAfter;
    }
}
/**
 * Validation error
 *
 * @class ValidationError
 * @extends {SDKError}
 */
export class ValidationError extends SDKError {
    constructor(message, fields, details) {
        super(message, 'VALIDATION_ERROR', 400, { ...details, fields });
        /** Fields that failed validation */
        Object.defineProperty(this, "fields", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'ValidationError';
        this.fields = fields;
    }
}
/**
 * Plugin error
 *
 * @class PluginError
 * @extends {SDKError}
 */
export class PluginError extends SDKError {
    constructor(message, pluginId, statusCode, details) {
        super(message, 'PLUGIN_ERROR', statusCode, { ...details, pluginId });
        /** Plugin ID where error occurred */
        Object.defineProperty(this, "pluginId", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'PluginError';
        this.pluginId = pluginId;
    }
}
/**
 * Cache error
 *
 * @class CacheError
 * @extends {SDKError}
 */
export class CacheError extends SDKError {
    constructor(message, layer, details) {
        super(message, 'CACHE_ERROR', undefined, { ...details, layer });
        /** Cache layer where error occurred */
        Object.defineProperty(this, "layer", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'CacheError';
        this.layer = layer;
    }
}
/**
 * Sync error
 *
 * @class SyncError
 * @extends {SDKError}
 */
export class SyncError extends SDKError {
    constructor(message, phase, source, dataType, details) {
        super(message, 'SYNC_ERROR', undefined, { ...details, phase, source, dataType });
        /** Source where sync failed */
        Object.defineProperty(this, "source", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Data type where sync failed */
        Object.defineProperty(this, "dataType", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /** Phase where sync failed */
        Object.defineProperty(this, "phase", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'SyncError';
        if (source !== undefined) {
            this.source = source;
        }
        if (dataType !== undefined) {
            this.dataType = dataType;
        }
        this.phase = phase;
    }
}
/**
 * Network error
 *
 * @class NetworkError
 * @extends {SDKError}
 */
export class NetworkError extends SDKError {
    constructor(message, statusCode, isRetryable = true, details) {
        super(message, 'NETWORK_ERROR', statusCode, { ...details, isRetryable });
        /** Whether the error is retryable */
        Object.defineProperty(this, "isRetryable", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = 'NetworkError';
        this.isRetryable = isRetryable;
    }
}
/**
 * Default SDK configuration values
 */
export const DEFAULT_SDK_CONFIG = {
    environment: 'production',
    cache: {
        enabled: true,
        layers: [CacheLayer.MEMORY, CacheLayer.LOCAL_DB],
        defaultTTL: 24 * 60 * 60 * 1000, // 24 hours
        maxSize: 50, // 50 MB
        useLRU: true,
    },
    retry: {
        maxAttempts: 3,
        initialDelay: 1000,
        maxDelay: 30000,
        backoffMultiplier: 2,
        useJitter: true,
        timeout: 30000,
    },
    logLevel: LogLevel.WARN,
    plugins: [],
    defaultDataTypes: [DataType.STEPS, DataType.HEART_RATE, DataType.SLEEP, DataType.ACTIVITY],
    autoSync: false,
    syncInterval: 0,
    maxDataAge: 90, // 90 days
    enableRealtimeUpdates: false,
};
/**
 * Default sync options
 */
export const DEFAULT_SYNC_OPTIONS = {
    forceFull: false,
    background: false,
    maxConcurrency: 3,
    priority: 1,
};
//# sourceMappingURL=config.js.map